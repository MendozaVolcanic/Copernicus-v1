name: ğŸ—‘ï¸ Eliminar data/sentinel2

on:
  workflow_dispatch:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Eliminar carpeta data/sentinel2
        run: |
          echo "ğŸ—‘ï¸ Eliminando data/sentinel2..."
          
          if [ -d "data/sentinel2" ]; then
            # Mostrar tamaÃ±o antes
            echo "ğŸ“Š TamaÃ±o antes:"
            du -sh data/sentinel2
            
            # Eliminar carpeta
            git rm -rf data/sentinel2
            
            echo "âœ… Carpeta eliminada"
          else
            echo "âš ï¸ Carpeta data/sentinel2 no existe"
          fi
          
          # Eliminar carpeta data/ completa si quedÃ³ vacÃ­a
          if [ -d "data" ] && [ ! "$(ls -A data)" ]; then
            git rm -rf data
            echo "âœ… Carpeta data/ vacÃ­a eliminada"
          fi
      
      - name: Commit cambios
        run: |
          git config user.name "CleanupBot"
          git config user.email "cleanup@volcano.com"
          
          if ! git diff --quiet --staged; then
            git commit -m "ğŸ—‘ï¸ Cleanup: Eliminar data/sentinel2 (migrado a docs/)"
            git push
            echo "âœ… Limpieza completada y guardada"
          else
            echo "â„¹ï¸ No hay cambios para commitear"
          fi
      
      - name: Mostrar tamaÃ±o final del repo
        run: |
          echo ""
          echo "ğŸ“Š TamaÃ±o final del repositorio:"
          du -sh .
          echo ""
          echo "ğŸ“ Carpetas principales:"
          du -sh docs/ || echo "docs/ no existe"
          du -sh .git/ || echo ".git/ no existe"
